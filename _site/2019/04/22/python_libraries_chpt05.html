<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer=true src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- Canonical -->
    <link rel="canonical" href="https://damacho.github.io/2019/04/22/python_libraries_chpt05.html">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="DaMacho" href="https://damacho.github.io/feed.xml"/>

    <!-- Font Awesome -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="/assets/css/vendor/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- Google Fonts -->
    
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css"> 

    

    <!-- KaTeX 0.8.3 -->
    
    <link rel="stylesheet" type="text/css" href="/assets/css/vendor/katex.min.css">
    <script src="/assets/js/vendor/katex.min.js">
    </script>
    

    <!-- Google Analytics -->
    
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-120963948-1', 'auto');
        ga('send', 'pageview');

    </script>
    
    
    <!-- seo tags -->
    
    <!-- Manual seo tags -->
    <!-- <title>Python Library Recipe, Ch 05 | DaMacho</title> -->
    <meta name="generator" content="Jekyll v3.8.1" />
    <meta property="og:title" content="Python Library Recipe, Ch 05" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="Study SummaryChapter 05 - 범용 OS/런타임 서비스" />
    <meta property="og:description" content="Study SummaryChapter 05 - 범용 OS/런타임 서비스" />
    <link rel="canonical" href="https://damacho.github.io/2019/04/22/python_libraries_chpt05.html" />
    <meta property="og:url" content="https://damacho.github.io/2019/04/22/python_libraries_chpt05.html" />
    <meta property="og:site_name" content="DaMacho" />
    <meta property="og:type" content="blog" />
    <script type="application/ld+json"></script>
    
    <title>Python Library Recipe, Ch 05 | DaMacho</title>
    <meta name="description" content="Study SummaryChapter 05 - 범용 OS/런타임 서비스">
   
</head>

  <body>
    <header class="site-header">
    
    <!-- Logo and title -->
	<div class="branding">
		<a href="/">
			<img class="avatar" src="/assets/img/salt.svg" alt=""/>
		</a>

		<h1 class="site-title">
			<a href="/">DaMacho</a>
		</h1>
	</div>
    
    <!-- Toggle menu -->
    <nav class="clear">
    <a id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>
    
    <!-- Menu -->
    <ul class="hide">
        <!-- Auto Generation of NORMAL pages in the navbar -->
        
        
        
        
        
        
        
        <li class="separator"> | </li>
        <li>
            <a class="clear" href="/about/">
                About
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li class="separator"> | </li>
        <li>
            <a class="clear" href="/portfolio/">
                Portfolio
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
         
        
        <!-- Auto Generation of SPECIAL pages in the navbar -->
        
          
            <li class="separator"> | </li>
            <li>
                <a class="clear" href="/search">
                    <i class="fa fa-search" aria-hidden="true"></i>
                </a>
            </li>
          
        
          
            <li class="separator"> | </li>
            <li>
                <a class="clear" href="/tags">
                    <i class="fa fa-tags" aria-hidden="true"></i>
                </a>
            </li>
          
        
    </ul>
        
	</nav>
</header>

    <div class="content">
      <!-- MathJax -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
<!-- Read event -->
<script>
try {
  document.addEventListener("DOMContentLoaded", function() {
    var accumScrollMove = 0;
    // Set it 1 msecs to avoid div by zero error
    var accumScrollTime = 1;
    var latestScrollTop = 0;
    var latestScrollAt = new Date();
    
    function checkScroll() {
      // 1. Check scrollbar movement speed
      var scrollTop = document.body.scrollTop;
      var scrollAt = new Date();
      var scrollTopDelta = Math.abs(latestScrollTop - scrollTop);
      var scrollTimeDelta = Math.min(scrollAt - latestScrollAt, 5 * 60 * 1000); // limit max time-delta to 5 minutes
      if(scrollTopDelta !== 0) {
        latestScrollTop = scrollTop;
        latestScrollAt = scrollAt;
        accumScrollMove += scrollTopDelta;
        accumScrollTime += scrollTimeDelta;
      }
    
      // 2. Check event firing condition
       if(accumScrollTime > 30 * 1000 && scrollTop / document.body.scrollHeight > 0.8) {
        var pixelPerSec = Math.floor(accumScrollMove / accumScrollTime * 1000);
        var label = pixelPerSec > 100 ? 'skimmer' : 'reader';
        ga('send', 'event', 'read', 'pps', label, pixelPerSec);
      } else {
        window.setTimeout(checkScroll, 500);
      }
    }
    
   checkScroll();
  });
} catch(e) {}
</script>

<!-- IPython Notebook -->
<script>
document.addEventListener("DOMContentLoaded", function(e) {
  var cells = document.querySelectorAll('article .cell');
  for(var i = 0; i < cells.length; i++) {
    var cell = cells[i];
    cell.addEventListener('click', function() {
      var curClasses = this.getAttribute('class');
      if(curClasses.indexOf(' expanded') !== -1) {
        this.setAttribute('class', curClasses.substring(0, curClasses.length - 9));
      } else {
        this.setAttribute('class', curClasses + ' expanded');
      }
    });
  }
});
</script>

<article >
  <header id="main" style="background-image: url('/')">
    <h1 id="Python+Library+Recipe%2C+Ch+05" class="title">Python Library Recipe, Ch 05</h1>
    <p class="meta">
    April 22, 2019
    
    </p>
  </header>
  <section class="post-content"><h1 id="study-summary">Study Summary</h1>

<h1 id="chapter-05---범용-os런타임-서비스">Chapter 05 - 범용 OS/런타임 서비스</h1>
<!--more-->

<p><strong>파이썬라이브러리레시피, 이케우치 다카히노 등 5명.</strong></p>
<blockquote>
  <p>스터디 발표를 위한 정리자료.</p>

  <p>5장에서는 운영체제가 제공하는 기능을 이용하는 것을 비롯하여 서버의 운용과 관리에 도움이 되는 표준 라이브러리를 소개함. 작업 자동화나 효율화에 도움이 될듯.</p>
</blockquote>

<h2 id="51-운영체제의-기능-이용하기">5.1 운영체제의 기능 이용하기</h2>

<p><a href="https://docs.python.org/3.4/library/os.html">OS모듈 공식문서</a></p>

<p><strong>OS 모듈의 주요 기능</strong></p>
<ul>
  <li><strong>실행 중인 프로세스 속성 조작</strong></li>
  <li>파일 기술자(descriptor) 조작</li>
  <li><strong>파일과 디렉터리 조작</strong></li>
  <li>프로세스 관리</li>
  <li><strong>다양한 시스템 정보에 대한 접근</strong></li>
  <li>스케줄러 인터페이스</li>
  <li><strong>무작위 문자열 생성</strong></li>
</ul>

<p><strong>(1) 실행 중인 프로세스 속성 조작</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">속성의 종류</th>
      <th style="text-align: left">함수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">환경변수</td>
      <td style="text-align: left">environ, getenv(), putenv(),…</td>
    </tr>
    <tr>
      <td style="text-align: left">사용자 ID</td>
      <td style="text-align: left">getuid(), setuid(), geteuid(), seteuid(), …</td>
    </tr>
    <tr>
      <td style="text-align: left">그룹 ID</td>
      <td style="text-align: left">getgid(), setgid(), getgroups(), setgroups(), …</td>
    </tr>
    <tr>
      <td style="text-align: left">프로세스 ID</td>
      <td style="text-align: left">getpid(), getpgid(), geppid(), …</td>
    </tr>
    <tr>
      <td style="text-align: left">스케줄링 우선도</td>
      <td style="text-align: left">getpriority(), setpriority(), …</td>
    </tr>
  </tbody>
</table>

<p>os 모듈에서 프로세스 속성에 대한 기능 대부분은 UNIX 계열 운영체제 기능에 의존하므로, Windows 환경에서는 이용할 수 없는 것이 많다. (공식 문서 참고)</p>

<p>os.environ 은 파이썬 프로스를 구동할 때 환경변수를 저장하는 맵 형식의 객체이다. UNIX와 Windows에서 모두 사용가능하다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 환경변수에 접근하기</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'SYSTEMDRIVE'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'SYSTEMROOT'</span><span class="p">])</span>
<span class="c"># os.environ['HAM'] = 'egg' </span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:
C:\WINDOWS
</code></pre></div></div>

<p>os.environ에 저장된 것은 os모듈이 import된 시점의 환경변수이다. 보통은 Python 구동 시에 site.py가 처리되는 도중의 시점의 환경변수라고 할 수 있다. 그 후에 변경된 환경변수는 반영되지 않으므로, 직접 접근하여 변경해야한다. 또한 설정한 환경변수는 실행 중인 프로세스 상의 ox.environ에만 반영되어 있으므로, 다른 프로세스 간에 값을 공유하는 용도로 사용할 수 없다.</p>

<p>동일하게, os모듈로 조작할 수 있는 다른 프로세스 속성도 실행 중인 프로세스에만 반영된다.</p>

<p><strong>(2) 파일과 디렉터리 조작</strong> <br />
파일 조작 관련 함수. (도서 또는 공식 문서 참고) <br />
예시)</p>
<ul>
  <li>chdir()</li>
  <li>chmod()</li>
  <li>chwon()</li>
  <li>getcwd()</li>
  <li>listdir()</li>
  <li>mkdir()</li>
  <li>makedirs()</li>
  <li>remove()</li>
  <li>removedirs()</li>
  <li>rmdir()</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 기본적인 파일 조작</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">'.'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">'.'</span><span class="p">)))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D:\DSS\Projects\blog_posts\jupyters
['.ipynb_checkpoints', 'pythonic_coding_chpt01_01.ipynb', 'pythonic_coding_chpt01_02.ipynb', 'python_libraries_chpt05.ipynb']
4
</code></pre></div></div>

<p><strong>(3) 다양한 시스템 정보에 대해 접근</strong> <br />
시스템 정보 관련 함수와 상수. (도서 및 문서 참고) <br />
예시)</p>
<ul>
  <li>cpu-count()</li>
  <li>getloadavg()</li>
</ul>

<p>파일 경로 관련 상수. (도시 및 문서 참고) <br />
예시)</p>
<ul>
  <li>curdir</li>
  <li>pardir</li>
  <li>sep</li>
  <li>extsep</li>
</ul>

<p><strong>(4) 무작위 문자열 생성</strong> <br />
os.urandom()은 운영체제가 제공하는 난수 생성기를 사용하여 무작위 문자열을 반환한다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 무작위 문자열 생성</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c"># 10바이트의 무작위 문자열 생성</span>
<span class="n">os</span><span class="o">.</span><span class="n">urandom</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>b'\xdb\xed\x86\x0e\x10\xb7\x88\x8a\xa4\x82'
</code></pre></div></div>

<p>random모듈이 생성하는 난수는 의사 난수이므로 보안상 용도로는 부적합하다. <br />
보안상 필요라면, os.urandom()을 사용하거나 내부에서 osurandom()을 사용하여 난수를 생성하는 random.SystemRandom 클래스를 이용할 것을 추천한다.</p>

<h2 id="52-스트림-다루기">5.2 스트림 다루기</h2>

<p><a href="https://docs.python.org/3.4/library/io.html">io모듈 공식문서</a></p>

<p><strong>io 모듈이 제공하는 클래스</strong></p>
<ul>
  <li>문자열을 파일과 같은 인터페이스로 다루는 StringIO 클래스</li>
  <li>바이트열을 파일과 같은 인터페이스로 다루는 BytesIO 클래스</li>
  <li>기타, 스트림 객체의 추상 기반 클래스군</li>
</ul>

<blockquote>
  <p>알게 모르게 이 모듈 덕을 본 경우가 많다고 한다… <br />
나는 정말 모르겟…</p>
</blockquote>

<p><strong>(1) 인메모리 텍스트 스트림 다루기 - StingIO</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># StringIO 기본적인 사용</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="s">"this is test</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>   <span class="c"># 초기값 설정 가능</span>
<span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>   <span class="c"># 스트림으로부터 지정한 크기만큼 읽어온다.</span>

<span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">tell</span><span class="p">())</span>   <span class="c"># 현재 오프셋을 반환</span>

<span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">io</span><span class="o">.</span><span class="n">SEEK_END</span><span class="p">))</span>   <span class="c"># 오프셋을 스트림 맨 끝으로 변경함.</span>

<span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'test'</span><span class="p">))</span>   <span class="c"># 스트림에 문자열을 쓴다.</span>

<span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>   <span class="c"># 스트림이 가진 모든 내용을 반환</span>

<span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c"># 스트림의 닫음.</span>
<span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'test'</span><span class="p">)</span>   <span class="c"># 스트림을 닫은 뒤에 쓰려하면 예외 발생.</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>this is te
10
13
4
this is test
test



---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

&lt;ipython-input-4-45512986cdf7&gt; in &lt;module&gt;()
     14 
     15 stream.close()   # 스트림의 닫음.
---&gt; 16 stream.write('test')   # 스트림을 닫은 뒤에 쓰려하면 예외 발생.


ValueError: I/O operation on closed file
</code></pre></div></div>

<p><strong>(2) 단위 테스트 활용 예</strong></p>
<ul>
  <li>파일 객체 대신 사용</li>
  <li>표준 출력 등을 캡처할 때</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># StringIO를 이용한 표준 출력 캡처</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>

<span class="k">def</span> <span class="nf">print_hoge</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'hoge'</span><span class="p">)</span>   <span class="c"># print() 는 sys.stdout.write() 와 같음.</span>
    
<span class="nd">@patch</span><span class="p">(</span><span class="s">'sys.stdout'</span><span class="p">,</span> <span class="n">new_callable</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">)</span>   <span class="c"># 표준 출력을 StringIO로 대체</span>
<span class="k">def</span> <span class="nf">test_print_hoge</span><span class="p">(</span><span class="n">mocked_object</span><span class="p">):</span>   <span class="c"># mocked_object가 대체한 후의 스트림</span>
    <span class="n">print_hoge</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">mocked_object</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">==</span> <span class="s">'hoge</span><span class="se">\n</span><span class="s">'</span>   <span class="c"># 스트림에 쓰인 내용을 검증</span>
    
<span class="n">test_print_hoge</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="53-인터프리터-관련-동작-및-조작">5.3 인터프리터 관련 동작 및 조작</h2>

<p><a href="https://docs.python.org/3.4/library/sys.html">sys모듈 공식문서</a></p>

<ul>
  <li>파이썬 인터프리터에서 사용하는 변수 및 파이썬 인터프리터의 동작에 관한 함수 제공</li>
</ul>

<p><strong>(1) 명령줄의 인수 얻기 - sys.argv</strong></p>

<p>sys.argv는 Python 스크립트를 실행할 때 주어지는 인수가 저장되는 리스트. <br />
sys.argv[0] 은 실행된 스크립트 자신의 파일명이다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 예시</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['C:\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py', '-f', 'C:\\Users\\Sanghun\\AppData\\Roaming\\jupyter\\runtime\\kernel-983620e9-b406-4689-b4d5-a6f581180cb8.json']
</code></pre></div></div>

<p>교재 예시)</p>
<blockquote>
  <p># hoge.py 파일 <br />
import sys <br />
print(sys.argv)</p>
</blockquote>

<p>hoge.py 실행 결과</p>
<blockquote>
  <p>$ python hoge.py -a abc <br />
[‘hoge.py’, ‘-a’, ‘abc’]</p>
</blockquote>

<ul>
  <li>sys.argv를 사용해서 commend line 인수를 처리할 수도 있다.</li>
  <li>복잡한 commend line 인수 처리가 필요하다면, “5.4 명령줄 옵선과 인수 다르기 -argparse”의 argeparse 모듈을 적용할 수도 있다.</li>
</ul>

<p><strong>(2) 라이브러리의 import path 조작하기 - sys.path</strong></p>

<p>sys.path는 import 대상 모듈이나 패키지의 위치가 되는 여러 개의 파일 경로를 저장한 리스트이다. sys.path에 파일 경로를 추가하면 해당 파일 경로에 있는 Python 패키지나 모듈을 import문으로 import 할 수 있다.</p>

<p>sys.path는 다음 요소를 통해 초기화된다.</p>
<ul>
  <li>실행된 Python 스크립트가 있는 경로 또는 대화모드인 경우에는 빈 문자열(스크립트 실행시 해당 디렉터리에서 탐색)</li>
  <li>환경변수 PYTHONPATH로 설정된 경로</li>
  <li>Python 설치 위치</li>
</ul>

<p>Python 스크립트가 위치한 디렉터리를 환경변수 PYTHONPATH로 지정하여 대화형 콘솔에서 실행한 예시.</p>

<blockquote>
  <p>$ ls /home/my/scripts <br />
myscript.py</p>
</blockquote>

<blockquote>
  <p>$ PYTHONPATH=/home/my/scripts python</p>
</blockquote>

<p>PYTHONPATH가 지정된 상태에서 sys.path 값 확인.</p>
<blockquote>
  <p>&gt;&gt;&gt; import sys <br />
&gt;&gt;&gt; import pprint <br />
&gt;&gt;&gt; pprint.pprint(sys.path) <br />
[’’, <br />
‘/home/my/scripts’, <br />
‘/usr/lib/python3.4’, <br />
…, <br />
‘…’]</p>
</blockquote>

<blockquote>
  <p>&gt;&gt;&gt; import myscript</p>
</blockquote>

<p>모듈은 리스트의 맨 앞 경로부터 순서대로 검색되어, 먼저 발견된 것을 import한다. <br />
그러므로 표준 라이브러리와 같은 이름의 모듈을 생성하는 것은 피하거나 주의할 필요가 있다.</p>

<p><strong>실행할 때 sys.path에 경로 추가</strong></p>
<blockquote>
  <p>&gt;&gt;&gt; import sys <br />
&gt;&gt;&gt; sys.path.append(‘/home/my/scripts’) <br />
&gt;&gt;&gt; import myscript</p>
</blockquote>

<p><strong>(3) 프로그램 종료하기 - sys.exit</strong></p>

<p>sys.exit()는 호출 시, Python 스크립트 실행을 종료시키고, 대화모드에서는 대화모드를 종료시킨다.</p>

<p>(교재 및 문서 참고.)</p>

<p><strong>(4) 콘솔 입출력 - sys.stdin, stdout, stderr</strong></p>

<p>인터프리터가 사용하는 콘솔의 입출력용 객체.</p>
<ul>
  <li>sys.stdin : 표준 입력 객체. 읽기 전용.</li>
  <li>sys.stdout : 표준 출력 객체. 쓰기 전용.</li>
  <li>sys.stderr : 표준 오류 출력 객체. 쓰기 전용.</li>
</ul>

<h2 id="54-명령줄commend-line-옵션과-인수-다루기">5.4 명령줄(commend line) 옵션과 인수 다루기</h2>

<p><a href="https://docs.python.org/3.4/library/argparse.html">argparse모듈 공식문서</a></p>

<ul>
  <li>UNIX 계열 운영체제의 관례에 따라 커맨드라인 옵션을 해석(parse)하는 기능을 제공</li>
</ul>

<p><strong>(1) 명령줄 옵션 다루기</strong></p>

<p>이하는 두 개의 인수를 갖는 스크립트를 예를 설명한다. <br />
스크립트는 문자열과 정수를 인수로 받으며 지정된 수만큼 반복하여 문자열을 표시하는 스크립트이다. <br />
argparse모듈을 사용하여 옵션을 정의하고, 주어진 인수를 해석하여 해석된 값을 가지고 간단한 처리를 실행한 예시이다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">argparse</span>

<span class="c"># parser의 인스턴스 작성</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">'Example command'</span><span class="p">)</span>

<span class="c"># 문자열을 받는 -s 옵션 정의</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'-s'</span><span class="p">,</span> <span class="s">'--string'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> 
                    <span class="n">help</span><span class="o">=</span><span class="s">'string to display'</span><span class="p">,</span> 
                    <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># 수치를 받는 -n 옵션 정의</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'-n'</span><span class="p">,</span> <span class="s">'--num'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> 
                    <span class="n">help</span><span class="o">=</span><span class="s">'number of times repeatedly display the string'</span><span class="p">,</span> 
                    <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c"># 인수를 해석(parse)하여 얻어진 값을 변수로 지정</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="c"># 해석으로 얻은 값 다루기. 디버깅용 처리</span>
<span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">string</span> <span class="o">*</span> <span class="n">args</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: ipykernel_launcher.py [-h] -s STRING [-n NUM]
ipykernel_launcher.py: error: the following arguments are required: -s/--string



An exception has occurred, use %tb to see the full traceback.


SystemExit: 2



C:\Anaconda3\lib\site-packages\IPython\core\interactiveshell.py:2969: UserWarning: To exit: use 'exit', 'quit', or Ctrl-D.
  warn("To exit: use 'exit', 'quit', or Ctrl-D.", stacklevel=1)
</code></pre></div></div>

<p>(교재 및 문서 참고)</p>
</section>
  
  <!-- Social media shares -->
  <footer>
<div class="share-buttons">
<ul class="share-buttons">
	
	<li>
		<!-- <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2019/04/22/python_libraries_chpt05.html&quote=Python Library Recipe, Ch 05%20%7C%20DaMacho" target="_blank" title="Share on Facebook"> -->
		<!-- <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2019/04/22/python_libraries_chpt05.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"> -->
		<a href="https://www.facebook.com/sharer/sharer.php?u=https://damacho.github.io/2019/04/22/python_libraries_chpt05.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
			<i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Facebook</span>
		</a>
	</li>
	

	
	<li>
		<!-- <a href="https://twitter.com/intent/tweet?source=http://localhost:4000/2019/04/22/python_libraries_chpt05.html&text=Python Library Recipe, Ch 05%20%7C%20DaMacho:%20http://localhost:4000/2019/04/22/python_libraries_chpt05.html" target="_blank" title="Tweet"> -->
		<a href="https://twitter.com/intent/tweet?source=https://damacho.github.io/2019/04/22/python_libraries_chpt05.html&text=Python Library Recipe, Ch 05%20%7C%20DaMacho:%20https://damacho.github.io/2019/04/22/python_libraries_chpt05.html" target="_blank" title="Tweet">
			<i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Tweet</span>
		</a>
	</li>
	

	

	

	

	

	
	<li>
		<!-- <a href="http://www.reddit.com/submit?url=http://localhost:4000/2019/04/22/python_libraries_chpt05.html&title=Python Library Recipe, Ch 05%20%7C%20DaMacho" target="_blank" title="Share on Reddit"> -->
		<a href="http://www.reddit.com/submit?url=https://damacho.github.io/2019/04/22/python_libraries_chpt05.html&title=Python Library Recipe, Ch 05%20%7C%20DaMacho" target="_blank" title="Share on Reddit">
			<i class="fa fa-reddit-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Reddit</span>
		</a>
	</li>
	

	

	

	
</ul>
</div>
</footer>

   
   <!-- Tag list -->
  
  


<footer>
  <div class="tag-list">
    
      <div class="meta">Tags</div>
    

    
    <a class="button" href="/tags#Python">
      <p><i class="fa fa-tag fa-fw"></i> Python</p>
    </a>
    
  </div>
</footer>

    
</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/2019/03/25/pythonic_coding_chpt01_01.html">
        Pythonic & Concepts (1)
      </a>
  </div>
  
  
</div>

    </div>
    
<footer class="site-footer">
    <p class="text">Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/sylhare/Type-on-Strap">Type on Strap</a>
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                


<li>
	<a href="mailto:po4865@gmail.com" title="Email">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>













<li>
	<a href="https://github.com/DaMacho" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>
































                </ul>
            </div>
</footer>




  </body>
</html>
